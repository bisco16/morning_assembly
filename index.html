<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <!-- ↑このサイトのみ公開しているため、googleなどのクローラーに引っかからないようにしています。 -->
    <title>Google reCAPTCHAの実装</title>
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css" />
    <link rel="stylesheet" href="main.css">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <script src="adobe_font.js"></script>
</head>
<body>
  <script>
function checkRecaptcha() {
  var response = grecaptcha.getResponse();
  if(response.length == 0) { 
    //reCaptcha 未認証
    document.getElementById('recaptcha-error').innerHTML = "reCaptchaにチェックを入れてください";
    return false;
  }
  else { 
    //reCaptch 認証
    document.myForm.elements['entry.1099493155'].value = response; // recaptchaのname属性
    document.myForm.submit();
  }
}

function showThxMessage(){
   var email = document.myForm.elements['entry.896218278'].yvalue; // メールアドレスのname属性
   if(email !== ''){
       document.myForm.reset();
       document.getElementById('thxMessage').style.display = 'block';
   }
}
</script>
<div id="formWrapper">
    <form action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSdZ0fywr3cfUMa5DKvLcAds4NRvioEle0-h03yeCAU036qRFQ/formResponse" method="post"name="myForm" target="dummyIframe" onsubmit="return checkRecaptcha();">
        <label>メールアドレス</label>
        <input type="email" name="entry.896218278" value="" required pattern="^(([-\w\d]+)(\.[-\w\d]+)*@([-\w\d]+)(\.[-\w\d]+)*(\.([a-zA-Z]{2,5}|[\d]{1,3})){1,2})$" />
        <label>お問い合わせ内容</label>
        <textarea required name="entry.1712780392"></textarea>
                <div class="g-recaptcha" data-sitekey="6LesGRogAAAAAGGwmz2ZcZwxa-_NaPWD36gsS_eR"></div>
                <div id="recaptcha-error"></div>
        <input type="hidden" name="entry.1099493155" value="dummy">
        <input type="submit" value="送信">
        <iframe name="dummyIframe" style="display:none;" onload="showThxMessage();"></iframe>
    </form>
</div>
<div id="thxMessage" style="display:none;">
    お問い合わせありがとうございました。<br /><br />
</div>
<script src="https://www.google.com/recaptcha/api.js"></script>
</body>
</html>
